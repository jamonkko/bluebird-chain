/*!
 * @license
 * bluebird-chain v0.2.0 (https://github.com/jamonkko/bluebird-chain#readme)
 * Copyright 2017 Jarkko Mönkkönen <jamonkko@gmail.com>
 * Licensed under MIT
 */
!function(e,n){if("function"==typeof define&&define.amd)define(["module","exports"],n);else if("undefined"!=typeof exports)n(module,exports);else{var r={exports:{}};n(r,r.exports),e.PC=e.PromiseChain=r.exports}}(this,function(e,n){"use strict";function r(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function t(e){if(Array.isArray(e)){for(var n=0,r=Array(e.length);n<e.length;n++)r[n]=e[n];return r}return Array.from(e)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.aware,r=e.promise,t={};return"undefined"!=typeof n&&(n===!0?t.aware={all:!0,props:!0}:"object"===("undefined"==typeof n?"undefined":a(n))?t.aware=n:t.aware=!!n),"undefined"!=typeof r&&(t.promise=r),t}function i(e){function n(e){for(var n=function(e){if(!e)return e;if("function"==typeof e.then)return e;if(e.hasOwnProperty(f))return e[f]();if(!d("aware"))return e;if(e instanceof Array){if(d("aware","all"))return d("promise").all(e)}else if(d("aware","props")&&"object"===("undefined"==typeof e?"undefined":a(e)))return d("promise").props(e);return e},r=function(e){return e instanceof Function||"object"===("undefined"==typeof e?"undefined":a(e))&&e.hasOwnProperty(f)?e:function(){return e}},t=function(e,r){return r.hasOwnProperty(f)?e.then(r[f]):e.then(r).then(n)},o=arguments.length,i=Array(o>1?o-1:0),u=1;u<o;u++)i[u-1]=arguments[u];return i.map(r).reduce(t,e)}var c=o(e),d=function(e,n){var r=function e(n,r,t){return null===n||"object"!==("undefined"==typeof n?"undefined":a(n))?{}:n.hasOwnProperty(r)?void 0===t||"object"!==a(n[r])?{val:n[r]}:e(n[r],t):{}},t=r(c,e,n);return t.hasOwnProperty("val")?t.val:r(p,e,n).val},l=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return n.apply(void 0,[d("promise").resolve()].concat(r))};return l.with=function(e){return i(e)},l.defaults=function(e){return u(p,o(e))},l.build=function(e){for(var r=arguments.length,t=Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];var i=function(r){for(var o=arguments.length,i=Array(o>1?o-1:0),u=1;u<o;u++)i[u-1]=arguments[u];return i.length>0?n.apply(void 0,[d("promise").resolve(),[r].concat(i),l.spread(e)].concat(t)):n.apply(void 0,[d("promise").resolve(),r,e].concat(t))};return i.bind=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(o){for(var i=arguments.length,u=Array(i>1?i-1:0),a=1;a<i;a++)u[a-1]=arguments[a];return u.length>0?n.apply(void 0,[d("promise").resolve().bind(r),[o].concat(u),l.spread(e)].concat(t)):n.apply(void 0,[d("promise").resolve().bind(r),o,e].concat(t))}},i},l.spread=function(e){return function(n){return e.apply(void 0,t(n))}},l.bind=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];return n.apply(void 0,[d("promise").resolve().bind(e)].concat(t))}},l.esc=function(e){return r({},f,e instanceof Function?e:function(){return e})},l}Object.defineProperty(n,"__esModule",{value:!0});var u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=Symbol("esc"),c="undefined"!=typeof Promise?Promise:void 0;void 0===c&&(c="undefined"!=typeof window?window.Promise:void 0);var p={aware:!0,promise:c},d=i();n.default=d,e.exports=n.default});