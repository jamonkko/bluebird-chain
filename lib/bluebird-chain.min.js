/*!
 * @license
 * bluebird-chain v0.2.0 (https://github.com/jamonkko/bluebird-chain#readme)
 * Copyright 2017 Jarkko Mönkkönen <jamonkko@gmail.com>
 * Licensed under MIT
 */
!function(r,e){if("function"==typeof define&&define.amd)define(["module","exports"],e);else if("undefined"!=typeof exports)e(module,exports);else{var n={exports:{}};e(n,n.exports),r.PC=r.PromiseChain=n.exports}}(this,function(r,e){"use strict";function n(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function o(r){if(Array.isArray(r)){for(var e=0,n=Array(r.length);e<r.length;e++)n[e]=r[e];return n}return Array.from(r)}function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r.aware,n=r.promise,o={};return void 0!==e&&(!0===e?o.aware={all:!0,props:!0}:"object"===(void 0===e?"undefined":u(e))?o.aware=e:o.aware=!!e),void 0!==n&&(o.promise=n),o}function i(r){function e(r){for(var e=function(r){if(!r)return r;if("function"==typeof r.then)return r;if(r.hasOwnProperty(f))return r[f]();if(!p("aware"))return r;if(r instanceof Array){if(p("aware","all"))return p("promise").all(r)}else if(p("aware","props")&&"object"===(void 0===r?"undefined":u(r)))return p("promise").props(r);return r},n=function(r){return r instanceof Function||"object"===(void 0===r?"undefined":u(r))&&r.hasOwnProperty(f)?r:function(){return r}},o=function(r,n){return n.hasOwnProperty(f)?r.then(n[f]):r.then(n).then(e)},t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return i.map(n).reduce(o,r)}var c=t(r),p=function(r,e){function n(r,e,o){return null===r||"object"!==(void 0===r?"undefined":u(r))?{}:r.hasOwnProperty(e)?void 0===o||"object"!==u(r[e])?{val:r[e]}:n(r[e],o):{}}var o=n(c,r,e);return o.hasOwnProperty("val")?o.val:n(l,r,e).val},s=function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return e.apply(void 0,[p("promise").resolve()].concat(n))};return s.with=function(r){return i(r)},s.defaults=function(r){return a(l,t(r))},s.build=function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),t=1;t<n;t++)o[t-1]=arguments[t];var i=function(n){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return i.length>0?e.apply(void 0,[p("promise").resolve(),[n].concat(i),s.spread(r)].concat(o)):e.apply(void 0,[p("promise").resolve(),n,r].concat(o))};return i.bind=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){for(var i=arguments.length,a=Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=arguments[u];return a.length>0?e.apply(void 0,[p("promise").resolve().bind(n),[t].concat(a),s.spread(r)].concat(o)):e.apply(void 0,[p("promise").resolve().bind(n),t,r].concat(o))}},i},s.spread=function(r){return function(e){return r.apply(void 0,o(e))}},s.bind=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){for(var n=arguments.length,o=Array(n),t=0;t<n;t++)o[t]=arguments[t];return e.apply(void 0,[p("promise").resolve().bind(r)].concat(o))}},s.esc=function(r){return n({},f,r instanceof Function?r:function(){return r})},s}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},f=Symbol("esc"),c="undefined"!=typeof Promise?Promise:void 0;void 0===c&&(c="undefined"!=typeof window?window.Promise:void 0);var l={aware:!0,promise:c},p=i();e.default=p,r.exports=e.default});